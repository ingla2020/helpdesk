<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout(~{::title}, ~{::section})}">
<head>
    <title>Ticket View</title>
</head>
<body>
<section>
    <h1 class="mt-4">Ticket View</h1>
    <div class="card">
        <div class="card-header" th:text="${ticket.subject}"></div>
        <div class="card-body">
            <p class="card-text" th:text="${ticket.description}"></p>
            <ul class="list-group list-group-flush">
                <li class="list-group-item"><strong>Priority:</strong> <span th:text="${ticket.priority}"></span></li>
                <li class="list-group-item"><strong>Status:</strong> <span th:text="${ticket.status}"></span></li>
                <li class="list-group-item"><strong>Assignee:</strong> <span th:text="${ticket.assignee?.name}"></span></li>
                <li class="list-group-item"><strong>Created At:</strong> <span th:text="${#temporals.format(ticket.createdAt, 'yyyy-MM-dd HH:mm')}"></span></li>
                <li class="list-group-item" th:if="${ticket.updatedAt != null}"><strong>Updated At:</strong> <span th:text="${#temporals.format(ticket.updatedAt, 'yyyy-MM-dd HH:mm')}"></span></li>
                <li class="list-group-item" th:if="${ticket.closedAt != null}"><strong>Closed At:</strong> <span th:text="${#temporals.format(ticket.closedAt, 'yyyy-MM-dd HH:mm')}"></span></li>
            </ul>
        </div>
        <div class="card-footer" th:if="${ticket.status != T(com.example.omnichannelticketsystem.domain.Ticket.Status).CLOSED}">
            <form th:action="@{/tickets/{id}/close(id=${ticket.id})}" method="post" class="d-inline">
                <button type="submit" class="btn btn-danger">Close Ticket</button>
            </form>
            <a th:href="@{/tickets/{id}/edit(id=${ticket.id})}" class="btn btn-warning">Edit</a>
        </div>
    </div>
</section>
</body>
</html>
